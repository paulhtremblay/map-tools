import os
import sys
CURRENT_DIR = os.path.dirname(os.path.abspath(__file__))
ONE_UP = os.path.split(CURRENT_DIR)[0]
sys.path.append(ONE_UP)

import pprint
pp = pprint.PrettyPrinter(indent = 4)


import kml
import gpx
import tools
import optimize as  optimize

POINTS = [   (47.4415674247, -121.6712067928),
    (47.4415685143, -121.6712049488),
    (47.4415716995, -121.6711974051),
    (47.4415725376, -121.6711953934),
    (47.4415970966, -121.6712424997),
    (47.441647388, -121.6714456771),
    (47.4416521657, -121.6714918613),
    (47.4416659959, -121.6715543903),
    (47.441712264, -121.6717765108),
    (47.4417278543, -121.6718806978),
    (47.4417479709, -121.6720920056),
    (47.4417467136, -121.6721787583),
    (47.4417586159, -121.6722016409),
    (47.4417105038, -121.672269199),
    (47.4416562729, -121.6724333167),
    (47.4416362401, -121.672600871),
    (47.4416794907, -121.6729683336),
    (47.441665912, -121.6731182858),
    (47.4416387547, -121.6733436752),
    (47.4416637328, -121.6734593455),
    (47.4416672532, -121.6736263968),
    (47.4416659959, -121.6737187654),
    (47.4416667502, -121.6739649419),
    (47.4416187219, -121.6742213443),
    (47.4416347314, -121.6744029801),
    (47.4416548479, -121.6746856179),
    (47.4416650739, -121.6749622207),
    (47.4416717794, -121.6751164477),
    (47.4416690134, -121.6751524899),
    (47.4416854419, -121.6754440125),
    (47.4416908063, -121.6754593514),
    (47.441703463, -121.6755302623),
    (47.4417259265, -121.6756011732),
    (47.441767836, -121.6757726669),
    (47.4418602046, -121.6759746708),
    (47.4419013597, -121.6761228628),
    (47.4419189617, -121.6762863938),
    (47.4419168662, -121.6763441451),
    (47.4419576861, -121.6764210071),
    (47.4419896211, -121.67656417),
    (47.4419941474, -121.676848568),
    (47.442024406, -121.677111173),
    (47.4420220591, -121.6774233989),
    (47.4419995118, -121.6775899474),
    (47.4419677444, -121.6778811347),
    (47.4419488013, -121.6781087033),
    (47.4419464543, -121.6783527005),
    (47.4419247452, -121.6786119528),
    (47.4419391621, -121.678525703),
    (47.4419700075, -121.6785075981),
    (47.4419089872, -121.6785328276),
    (47.4418009445, -121.6785455681),
    (47.4417280219, -121.6786566284),
    (47.4416875374, -121.6787997913),
    (47.4416612182, -121.6789355781),
    (47.4416509923, -121.6790167987),
    (47.4416472204, -121.6790375859),
    (47.4415862001, -121.6792382486),
    (47.4415542651, -121.679379819),
    (47.4415370822, -121.6795265023),
    (47.4414510839, -121.6796498839),
    (47.4414229207, -121.6796925478),
    (47.4413635768, -121.6797332838),
    (47.4412546121, -121.679772092),
    (47.4412516784, -121.6797697451),
    (47.4410819449, -121.6795975808),
    (47.441015644, -121.6794521548),
    (47.4409651011, -121.6793270968),
    (47.4409324955, -121.6791927349),
    (47.4409255385, -121.6791249253),
    (47.4409515224, -121.6789582931),
    (47.4409476668, -121.6788655892),
    (47.440940626, -121.6786757391),
    (47.4409506842, -121.6785806883),
    (47.4409199227, -121.6784406267),
    (47.440899387, -121.678330237),
    (47.4408589024, -121.6781905945),
    (47.4408459105, -121.6781237908),
    (47.4408073537, -121.6779730842),
    (47.4408022407, -121.6778947972),
    (47.4408566393, -121.6777537297),
    (47.4408519454, -121.6777507961),
    (47.4408402108, -121.6777229682),
    (47.4408636801, -121.6775902826),
    (47.4409071822, -121.6774679068),
    (47.4408534542, -121.6772172879),
    (47.440807689, -121.6771234106),
    (47.4407910928, -121.677071359),
    (47.4406833854, -121.6769516654),
    (47.4406119715, -121.6766667645),
    (47.4405711517, -121.6765120346),
    (47.4405647814, -121.6764279641),
    (47.4405488558, -121.6764456499),
    (47.4404819682, -121.676207101),
    (47.4404247198, -121.6760401335),
    (47.4403367098, -121.6759010777),
    (47.4403404817, -121.6757619381),
    (47.44027921, -121.6755840741),
    (47.4401784595, -121.6754582617),
    (47.4400731828, -121.6754097305),
    (47.4400694109, -121.6755621135),
    (47.4401021004, -121.6756866686),
    (47.4401409924, -121.6757709067),
    (47.4401206244, -121.6757871676),
    (47.4401231389, -121.6759424843),
    (47.4401267432, -121.6760700569),
    (47.4401407409, -121.676252028),
    (47.440121714, -121.6763561312),
    (47.4400766194, -121.6765702888),
    (47.4400989152, -121.6766977776),
    (47.4401109014, -121.6768532619),
    (47.4400575086, -121.6770013701),
    (47.4400273338, -121.6770862788),
    (47.4399441015, -121.6771060601),
    (47.4398897868, -121.6770516615),
    (47.4398076441, -121.6769525036),
    (47.4397985917, -121.6769293696),
    (47.4397075642, -121.6768663377),
    (47.4396524951, -121.6766523477),
    (47.4395664968, -121.6763898265),
    (47.439558031, -121.6763723083),
    (47.4395151157, -121.6762762517),
    (47.4394950829, -121.6761503555),
    (47.4395670835, -121.6761415545),
    (47.4396287743, -121.6761164926),
    (47.439558031, -121.6759938654),
    (47.4395248387, -121.6759263072),
    (47.4395138584, -121.6759071965),
    (47.4395179655, -121.6757813003),
    (47.4394994415, -121.67562766),
    (47.4395056441, -121.6755333636),
    (47.4394778162, -121.6754128318),
    (47.4394281954, -121.6753640492),
    (47.4393426161, -121.6753291804),
    (47.4392936658, -121.6752017755),
    (47.4392098468, -121.6750073154),
    (47.4391506705, -121.674875468),
    (47.4390741438, -121.6748230811),
    (47.4390127882, -121.6748526692),
    (47.4389937613, -121.6749108396),
    (47.4390070885, -121.6751308646),
    (47.4390766583, -121.6753880214),
    (47.4391329009, -121.6755499598),
    (47.4391411152, -121.6756963078),
    (47.4391486589, -121.6758227907),
    (47.4391512573, -121.6759394668),
    (47.439132398, -121.6760934424),
    (47.4390937574, -121.67621959),
    (47.4390707072, -121.6762638465),
    (47.4390745629, -121.676458139),
    (47.4390672706, -121.6766226757),
    (47.4390473217, -121.676831888),
    (47.439008262, -121.6768626496),
    (47.4389754888, -121.6769331414),
    (47.4389492534, -121.6771160346),
    (47.4389677774, -121.6772951558),
    (47.4389720522, -121.6774605308),
    (47.43899066, -121.6776030231),
    (47.4390173983, -121.6778403148),
    (47.4390008021, -121.6780405585),
    (47.4389686994, -121.678187158),
    (47.4389280472, -121.6782894172),
    (47.4388593994, -121.6783985496),
    (47.4387903325, -121.6784987971),
    (47.4387856387, -121.6785305645),
    (47.4386828765, -121.6786625795),
    (47.4386267178, -121.6788009647),
    (47.4386091158, -121.6790243424),
    (47.4385437369, -121.6792448703),
    (47.4384578224, -121.6794612072),
    (47.4384609237, -121.6795757879),
    (47.4385164957, -121.6796590202),
    (47.4385880772, -121.6798242275),
    (47.4386713095, -121.679898072),
    (47.4387589842, -121.6799663007),
    (47.4388780072, -121.6801109724),
    (47.4389231019, -121.6803092044),
    (47.4389580544, -121.6804894153),
    (47.43896937, -121.6806839593),
    (47.4389692023, -121.6807006393),
    (47.4389636703, -121.6808169801),
    (47.4389623292, -121.6808256134),
    (47.4390317313, -121.6809538566),
    (47.4390387721, -121.6810673475),
    (47.4390577991, -121.681205146),
    (47.4390873034, -121.6814117599),
    (47.4390954338, -121.6815746203),
    (47.4390678573, -121.6817524843),
    (47.4390398618, -121.681880895),
    (47.4390381016, -121.6820609383),
    (47.4390654266, -121.6821984015),
    (47.4390685279, -121.6823964659),
    (47.4390802626, -121.6825677082),
    (47.4391016364, -121.6827798542),
    (47.4390779994, -121.6828951892),
    (47.4390613195, -121.6830873024),
    (47.439069869, -121.683285702),
    (47.4390731379, -121.6834229976),
    (47.4390908238, -121.6835834272),
    (47.4391197413, -121.6837707628),
    (47.43911203, -121.683924403),
    (47.4390704557, -121.6840665601),
    (47.4390971102, -121.6842162609),
    (47.4391250219, -121.6842124052),
    (47.4390965234, -121.6842854954),
    (47.4390232656, -121.6842357069),
    (47.4390399456, -121.6842262354),
    (47.4390450586, -121.6842894349),
    (47.439050423, -121.6843247227),
    (47.4390423764, -121.6844449192),
    (47.4390270375, -121.6845124774),
    (47.4390136264, -121.6845741682),
    (47.4389354233, -121.6846645251),
    (47.4389138818, -121.6846757568),
    (47.4389251973, -121.6846574005),
    (47.4388956092, -121.6845632717),
    (47.4388837907, -121.6845064424),
    (47.4388323259, -121.6843673028),
    (47.4387464114, -121.6842055321),
    (47.4387142248, -121.6840139218),
    (47.4386918452, -121.6839144286),
    (47.4386510253, -121.6837527417),
    (47.4385461677, -121.6834992729),
    (47.4385542981, -121.683241697),
    (47.4384372029, -121.6830163077),
    (47.4383731652, -121.6828323249),
    (47.4383601733, -121.6825989727),
    (47.4383508693, -121.6825632658),
    (47.4383356981, -121.6823144909),
    (47.4382110592, -121.6822605953),
    (47.4381825607, -121.6822864115),
    (47.4382143281, -121.6824112181),
    (47.4381941278, -121.6825997271),
    (47.4381781183, -121.6828827001),
    (47.4381146673, -121.6831219196),
    (47.4380835705, -121.6833693534),
    (47.4380683992, -121.6836457886),
    (47.4380698241, -121.6839344613),
    (47.4380321894, -121.6841473617),
    (47.4379182793, -121.6843704041),
    (47.4378678203, -121.6845486034),
    (47.4378525652, -121.6846014094),
    (47.4377194606, -121.6847771779),
    (47.4376092386, -121.6850503441),
    (47.4375222344, -121.6852704529),
    (47.4374567717, -121.6854375042),
    (47.4373789039, -121.6856825072),
    (47.4372587074, -121.685895659),
    (47.4372540135, -121.685892893),
    (47.4371927418, -121.685831286),
    (47.4372896366, -121.6860771272),
    (47.4372369144, -121.6863380559),
    (47.4371459708, -121.6864479426),
    (47.4370589666, -121.6864902712),
    (47.4370195717, -121.6865110584),
    (47.4369389378, -121.6865605116),
    (47.4368583877, -121.6865778621),
    (47.4368122872, -121.6865634453),
    (47.4367894884, -121.6865434125),
    (47.4367299769, -121.6865465138),
    (47.436682703, -121.6865351144),
    (47.4364614207, -121.6867334303),
    (47.4363516178, -121.6868428979),
    (47.4361881707, -121.6869780142),
    (47.4360737577, -121.6870529484),
    (47.4360351171, -121.687075831),
    (47.4360117316, -121.6871106159),
    (47.4359564111, -121.687141126),
    (47.4358512182, -121.687235171),
    (47.4357450195, -121.6872742306),
    (47.4357658904, -121.6872817744),
    (47.4356630445, -121.6873366758),
    (47.4355904572, -121.687387554),
    (47.435496999, -121.6874411982),
    (47.4354709312, -121.6874627396),
    (47.4353918899, -121.6876123566),
    (47.4352483079, -121.6877337266),
    (47.4351650756, -121.6877736244),
    (47.4350820109, -121.6878223233),
    (47.4350325577, -121.6878582817),
    (47.4349224195, -121.6879457049),
    (47.4347979482, -121.6880094074),
    (47.434696611, -121.6880356427),
    (47.4345175736, -121.6880829167),
    (47.4343925994, -121.6881596949),
    (47.4342654459, -121.6882389877),
    (47.4341183435, -121.6882984154),
    (47.4341002386, -121.6883110721),
    (47.4338751007, -121.6883914545),
    (47.4338807166, -121.6884048656),
    (47.4338116497, -121.6884310171),
    (47.4337069597, -121.6884352081),
    (47.4335679039, -121.6885024309),
    (47.4333878607, -121.68855289),
    (47.4332453683, -121.688669147),
    (47.4332242459, -121.6886766069),
    (47.4332036264, -121.6886901017),
    (47.4331099167, -121.6888225358),
    (47.4329469725, -121.6889127251),
    (47.4329424463, -121.6889315005),
    (47.432911098, -121.6889400501),
    (47.4327483214, -121.6890616715),
    (47.4327166378, -121.6891232785),
    (47.432598453, -121.6893613245),
    (47.4325313978, -121.6894909926),
    (47.4324732274, -121.6895743925),
    (47.4324667733, -121.6897365823),
    (47.4323479179, -121.6899805795),
    (47.4323269632, -121.6900337208),
    (47.4323124625, -121.6900509037),
    (47.4323230237, -121.6900882032),
    (47.4322314095, -121.690264307),
    (47.43204684, -121.6905022692),
    (47.4320345186, -121.6906376369),
    (47.4319962971, -121.6907467693),
    (47.4318827223, -121.6908448376),
    (47.4318494461, -121.6909792833),
    (47.4318761844, -121.6910964623),
    (47.4319016654, -121.6911825445),
    (47.4319506157, -121.6912312433),
    (47.4320493545, -121.6913127154),
    (47.432135269, -121.6914505139),
    (47.4322406296, -121.6915524378),
    (47.4323762488, -121.6916943435),
    (47.432430815, -121.6917639133),
    (47.432437269, -121.6917680204),
    (47.4325034022, -121.6917910706),
    (47.4326918274, -121.6919433698),
    (47.4326721299, -121.6920961719),
    (47.4325893167, -121.6921526659),
    (47.4325215071, -121.692173956),
    (47.4324179906, -121.6922180448),
    (47.432292765, -121.6922291927),
    (47.432224201, -121.6922558472),
    (47.4321505241, -121.692222571),
    (47.4321189243, -121.6922330484),
    (47.4319460895, -121.6922818311),
    (47.4318482727, -121.6922725271),
    (47.43179488, -121.692292979),
    (47.4317626934, -121.6923015285),
    (47.4316756893, -121.6923498921),
    (47.4316572491, -121.6923804022),
    (47.4315601867, -121.6923864372),
    (47.4314684886, -121.6924074758),
    (47.4314680696, -121.6924140975),
    (47.4314142577, -121.6924355552),
    (47.4312929716, -121.692435639),
    (47.431195993, -121.6924179532),
    (47.4311039597, -121.6924038716),
    (47.4310478847, -121.6924889479),
    (47.4309430271, -121.692505125),
    (47.4308679253, -121.6925348807),
    (47.4307266902, -121.692524571),
    (47.4306039792, -121.6925475374),
    (47.4304534402, -121.6924681608),
    (47.4303070083, -121.692420803),
    (47.4302350916, -121.6923933942),
    (47.4300951976, -121.6922788136),
    (47.4300904199, -121.6922835074),
    (47.4300542101, -121.6923050489),
    (47.4299144, -121.6922564339),
    (47.4298231211, -121.6922739521),
    (47.4297321774, -121.6922380775),
    (47.4296807963, -121.6922338866),
    (47.4295666348, -121.6921405122),
    (47.4295079615, -121.6921060625),
    (47.4293835741, -121.692017382),
    (47.4292990845, -121.6919993609),
    (47.4292543251, -121.6919805016),
    (47.4292156007, -121.6919613909),
    (47.4292295985, -121.6919649951),
    (47.4292228092, -121.6919314675),
    (47.4292453565, -121.6919386759),
    (47.4292476196, -121.6919395141),
    (47.4292314425, -121.6919370834),
    (47.4291999266, -121.6919345688),
    (47.429172853, -121.6919007059),
    (47.4291085638, -121.6919036396),
    (47.4290147703, -121.6918359138),
    (47.4288744573, -121.6917948425),
    (47.4287479743, -121.6916791722),
    (47.428656863, -121.6916200798),
    (47.4285649136, -121.6914993804),
    (47.428542031, -121.6913719755),
    (47.4285292905, -121.6912328359),
    (47.4285111856, -121.6910163313),
    (47.4285293743, -121.6907883435),
    (47.4285412766, -121.6906091385),
    (47.4285692722, -121.6904295143),
    (47.4286126904, -121.6901895404),
    (47.4287348986, -121.6900302004),
    (47.4287675042, -121.689996589),
    (47.4289300293, -121.6898508277),
    (47.4289675802, -121.6896655038),
    (47.4289268441, -121.6895101033),
    (47.4288470484, -121.6894369293),
    (47.4287683424, -121.6893766634),
    (47.4286659155, -121.6894456465),
    (47.4285314698, -121.6895580478),
    (47.4283962697, -121.6896880511),
    (47.4282827787, -121.6897523403),
    (47.4281444773, -121.6898112651),
    (47.4280133843, -121.689910423),
    (47.4278826267, -121.6899807472),
    (47.4277682137, -121.6901126783),
    (47.4276871607, -121.6903275065),
    (47.4275868293, -121.6904674005),
    (47.4274820555, -121.6905498784),
    (47.4272885174, -121.6906205378),
    (47.4271402415, -121.6907600965),
    (47.4270593561, -121.6908297502),
    (47.4269637186, -121.6909810435),
    (47.4268965796, -121.6911372822),
    (47.426863974, -121.6910712328),
    (47.4268467072, -121.6910009086),
    (47.4268460367, -121.6909407265),
    (47.426846372, -121.6909131501),
    (47.426861627, -121.6906974837),
    (47.4269158579, -121.6905591823),
    (47.4269213062, -121.6903131735),
    (47.4269597791, -121.6901080683),
    (47.4269568454, -121.6899726167),
    (47.4268564302, -121.69006465),
    (47.4268455338, -121.6900722776),
    (47.4268068094, -121.6901144385),
    (47.4267002754, -121.6901728604),
    (47.4265756365, -121.6902215593),
    (47.4264744669, -121.690265229),
    (47.4263462238, -121.6903131735),
    (47.4263162166, -121.690324489),
    (47.4261788372, -121.6904605273),
    (47.4260346685, -121.6906549875),
    (47.4260148872, -121.6906919517),
    (47.4259863887, -121.690720953),
    (47.425850099, -121.6908563208),
    (47.4258032441, -121.6908825561),
    (47.4256283976, -121.6910346039),
    (47.4255607557, -121.6911145672),
    (47.4254593346, -121.6911853943),
    (47.4253735878, -121.6912724823),
    (47.4253051914, -121.6913267132),
    (47.4251708295, -121.6914309002),
    (47.425155323, -121.691465266),
    (47.4251338653, -121.6915541142),
    (47.4250922073, -121.6915941797),
    (47.424992295, -121.6916798428),
    (47.4248742778, -121.6918592993),
    (47.4248011038, -121.6919890512),
    (47.4247734435, -121.6920191422),
    (47.4247430172, -121.6920600459),
    (47.4246432725, -121.6923101619),
    (47.4245422706, -121.6925104056),
    (47.4244361557, -121.6926902812),
    (47.4243421108, -121.6929041874),
    (47.4243402667, -121.6929166764),
    (47.4243218265, -121.6930594202),
    (47.4243198987, -121.6931237932),
    (47.4243323877, -121.6932922695),
    (47.4244017899, -121.6935461573),
    (47.4244685099, -121.6938642506),
    (47.424455015, -121.6941129416),
    (47.4244978465, -121.6942249238),
    (47.4245833419, -121.6943483893),
    (47.4246077333, -121.6943673324),
    (47.4247087352, -121.6944011953),
    (47.4247575179, -121.6944224853),
    (47.424796829, -121.6944285203),
    (47.4249850027, -121.6944270115),
    (47.425192371, -121.6944410931),
    (47.4252579175, -121.6944438592),
    (47.4254068639, -121.6944271792),
    (47.4254160002, -121.6944229882),
    (47.4254514556, -121.6943988483),
    (47.4254195206, -121.6944170371),
    (47.4253184348, -121.694554165),
    (47.4251961429, -121.6946910415),
    (47.4251464382, -121.6947720107),
    (47.4250834063, -121.6949220467),
    (47.4250127468, -121.6951249726),
    (47.4249627069, -121.6952681355),
    (47.4248699192, -121.6953682993),
    (47.4247445259, -121.6954962909),
    (47.4246478826, -121.6956684552),
    (47.4245985132, -121.6957909986),
    (47.4245001096, -121.695871884),
    (47.4243871216, -121.6959112789),
    (47.4243094213, -121.695942292),
    (47.4241975229, -121.6960025579),
    (47.4241046514, -121.696124766),
    (47.4242241774, -121.6961525939),
    (47.4243524205, -121.6962287016),
    (47.424524501, -121.6962624807),
    (47.4246545881, -121.6962004546),
    (47.4246801529, -121.6961739678),
    (47.4247909617, -121.6961378418),
    (47.4249551632, -121.6960401088),
    (47.4250976555, -121.6959683597),
    (47.4251973163, -121.6958583891),
    (47.4253321812, -121.6957526095),
    (47.4254160002, -121.6956301499),
    (47.4255066086, -121.6955440678),
    (47.4256100412, -121.6955126356),
    (47.4257462472, -121.695533758),
    (47.4258545414, -121.6954895016),
    (47.4259983748, -121.6954880767),
    (47.4261898175, -121.6955517791),
    (47.426341949, -121.6955834627),
    (47.4264997803, -121.6955824569),
    (47.42663146, -121.6955887433),
    (47.4267569371, -121.6956176609),
    (47.4269063864, -121.6955785174),
    (47.4270842504, -121.6955860611),
    (47.4271772895, -121.695580529),
    (47.4273791257, -121.6955849715),
    (47.42753461, -121.6955917608),
    (47.4275100511, -121.6957400367),
    (47.4274367094, -121.6958562098),
    (47.4273302592, -121.6959520988),
    (47.4272228871, -121.6960935015),
    (47.4271416664, -121.6961686034),
    (47.4270117469, -121.6962678451),
    (47.4268660694, -121.6963209864),
    (47.4267635588, -121.6963863652),
    (47.4267548416, -121.6963895503),
    (47.4266617186, -121.6964742076),
    (47.4265661649, -121.6965745389),
    (47.4264821783, -121.6966417618),
    (47.4264150392, -121.6967218928),
    (47.4263463076, -121.6967757046),
    (47.426299369, -121.6968066338),
    (47.4262219202, -121.6968798917),
    (47.4260433856, -121.6969496291),
    (47.4259397853, -121.6970238928),
    (47.4258245341, -121.6970762797),
    (47.4257175811, -121.6971726716),
    (47.4256930221, -121.697256323),
    (47.4256675411, -121.6972430795),
    (47.4255532958, -121.6973765194),
    (47.4254511204, -121.6975291539),
    (47.4253507052, -121.6976097878),
    (47.4252623599, -121.6977273859),
    (47.4252223782, -121.6979841236),
    (47.4251362123, -121.6980601475),
    (47.4251809716, -121.6980904061),
    (47.4252924509, -121.6980115324),
    (47.4253949616, -121.697993679),
    (47.4254728295, -121.6979693715),
    (47.4255849794, -121.6980173998),
    (47.4256713968, -121.6980525199),
    (47.4258048367, -121.6980919987),
    (47.4259046651, -121.6980582196),
    (47.4259920046, -121.6980917472),
    (47.4260518514, -121.6981917433),
    (47.4259933457, -121.6982557811),
    (47.425937606, -121.6983488202),
    (47.4258373585, -121.6984027158),
    (47.4257410504, -121.6985263489),
    (47.4256523699, -121.6985970084),
    (47.4255181756, -121.6986898798),
    (47.4254107196, -121.6988800652),
    (47.4252925348, -121.6990109067),
    (47.4251726735, -121.6991938837),
    (47.4251013435, -121.6993217077),
    (47.4250633735, -121.699354481),
    (47.4250763655, -121.6993372981),
    (47.4251969811, -121.6993125714),
    (47.4252932053, -121.6993455961),
    (47.4252984021, -121.6992712487),
    (47.4253072869, -121.6992569156),
    (47.4253217038, -121.6992325243),
    (47.4253094662, -121.6992114019),
    (47.4253099691, -121.6991716716),
    (47.4253026769, -121.6992035229),
    (47.4253025092, -121.6991868429),
    (47.4253071193, -121.6991732642),
    (47.4253068678, -121.6991967335),
    (47.4252951331, -121.6991968174),
    (47.4252993241, -121.6991878487),
    (47.4253004976, -121.6991629545),
    (47.4253072869, -121.6991704982),
    (47.4252837338, -121.699166391),
    (47.4252964742, -121.6991681512),
    (47.4253127351, -121.6991560813),
    (47.4253201112, -121.6991438437),
    (47.4253195245, -121.6991457716),
    (47.4252888467, -121.6991725098),
    (47.4252754357, -121.6991796345),
    (47.4252792075, -121.6991837416),
    (47.4253149983, -121.6991805565),
    (47.4253765214, -121.6991729289),
    (47.4253414012, -121.699167816),
    (47.4253531359, -121.6991899442),
    (47.425346598, -121.6991674807),
    (47.425338719, -121.6991832387),
    (47.4253178481, -121.6991907824),
    (47.4253131542, -121.6991760302),
    (47.4253111426, -121.6991710011),
    (47.4253169261, -121.6991847474),
    (47.4253010005, -121.6991833225),
    (47.4253103044, -121.699175192),
    (47.4253097177, -121.6991515551),
    (47.425313741, -121.6991647147),
    (47.425311394, -121.6991513874),
    (47.4253215361, -121.69917427),
    (47.4253209494, -121.6991896089)]

def _write(root, path):
    dir_ = os.path.dirname(os.path.abspath(__file__))
    dir2 = os.path.join(dir_, 'test_out')
    if not os.path.isdir(dir2):
        os.mkdir(dir2)
    path = os.path.join(dir2,  path)
    tools.write_to_path(root = root, path = path)

def test_optimize():
    opt_points = optimize.optimize_points(
            points = POINTS
            )
    line_element = kml.make_line(
            name = 'new-line', 
            points = opt_points
            )
    root = kml.make_write_root()
    root.append(line_element)
    _write(root = root, 
            path = 'optimize1.kml',
            )
